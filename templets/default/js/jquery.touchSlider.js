!function(t){t.fn.touchSlider=function(s){s.supportsCssTransitions=function(t){for(var i=["Webkit","Moz","Ms"],s=0,n=i.length;s<n;s++)if(void 0!==t[i[s]+"Transition"])return!0;return!1}(document.createElement("div").style),s=jQuery.extend({roll:!0,flexible:!1,btn_prev:null,btn_next:null,paging:null,speed:65,view:1,range:.15,page:1,transition:!1,initComplete:null,counter:null,multi:!1},s);var n=[];return n=t.extend({},t.fn.touchSlider.defaults,s),this.each(function(){t.fn.extend(this,i);var s=this;this.opts=n,this._view=this.opts.view,this._speed=this.opts.speed,this._tg=t(this),this._list=this._tg.children().children(),this._width=parseInt(this._tg.css("width")),this._item_w=parseInt(this._list.css("width")),this._len=this._list.length,this._range=this.opts.range*this._width,this._pos=[],this._start=[],this._startX=0,this._startY=0,this._left=0,this._top=0,this._drag=!1,this._scroll=!1,this._btn_prev,this._btn_next,this.init(),t(this).bind("touchstart",this.touchstart).bind("touchmove",this.touchmove).bind("touchend",this.touchend).bind("dragstart",this.touchstart).bind("drag",this.touchmove).bind("dragend",this.touchend),t(window).bind("orientationchange resize",function(){s.resize(s)})})};var i={init:function(){var i=this;t(this).children().css({width:this._width+"px",overflow:"visible"}),this.opts.flexible&&(this._item_w=this._width/this._view),this.opts.roll&&(this._len=Math.ceil(this._len/this._view)*this._view);for(var s=this.opts.page>1&&this.opts.page<=this._len?(this.opts.page-1)*this._item_w:0,n=0;n<this._len;++n)this._pos[n]=this._item_w*n-s,this._start[n]=this._pos[n],this._list.eq(n).css({float:"none",display:"block",position:"absolute",top:"0",left:this._pos[n]+"px",width:this._item_w+"px"}),this.opts.supportsCssTransitions&&this.opts.transition&&this._list.eq(n).css({"-moz-transition":"0ms","-moz-transform":"","-ms-transition":"0ms","-ms-transform":"","-webkit-transition":"0ms","-webkit-transform":"",transition:"0ms",transform:""});this.opts.btn_prev&&this.opts.btn_next&&(this.opts.btn_prev.bind("click",function(){return i.animate(1,!0),!1}),this.opts.btn_next.bind("click",function(){return i.animate(-1,!0),!1})),this.opts.paging&&t(this._list).each(function(t,s){i.opts.paging.eq(t).bind("click",function(s){return i.go_page(t,s),!1})}),this.counter(),this.initComplete()},initComplete:function(){"function"==typeof this.opts.initComplete&&this.opts.initComplete(this)},resize:function(t){if(t.opts.flexible){var i=t._item_w;t._width=parseInt(t._tg.css("width")),t._item_w=t._width/t._view,t._range=t.opts.range*t._width;for(var s=0;s<t._len;++s)t._pos[s]=t._pos[s]/i*t._item_w,t._start[s]=t._start[s]/i*t._item_w,t._list.eq(s).css({left:t._pos[s]+"px",width:t._item_w+"px"}),this.opts.supportsCssTransitions&&this.opts.transition&&t._list.eq(s).css({"-moz-transition":"0ms","-moz-transform":"","-ms-transition":"0ms","-ms-transform":"","-webkit-transition":"0ms","-webkit-transform":"",transition:"0ms",transform:""})}this.counter()},touchstart:function(t){if("touchstart"==t.type&&t.originalEvent.touches.length<=1||"dragstart"==t.type){this._startX=t.pageX||t.originalEvent.touches[0].pageX,this._startY=t.pageY||t.originalEvent.touches[0].pageY,this._scroll=!1,this._start=[];for(var i=0;i<this._len;++i)this._start[i]=this._pos[i]}},touchmove:function(t){if("touchmove"==t.type&&t.originalEvent.touches.length<=1||"drag"==t.type){this._left=(t.pageX||t.originalEvent.touches[0].pageX)-this._startX,this._top=(t.pageY||t.originalEvent.touches[0].pageY)-this._startY,(this._left<0?-1*this._left:this._left)<(this._top<0?-1*this._top:this._top)||this._scroll?(this._left=0,this._drag=!1,this._scroll=!0):(t.preventDefault(),this._drag=!0,this._scroll=!1,this.position(t));for(var i=0;i<this._len;++i){var s=this._start[i]+this._left;if(this.opts.supportsCssTransitions&&this.opts.transition){var n="translate3d("+s+"px,0,0)";this._list.eq(i).css({left:"","-moz-transition":"0ms","-moz-transform":n,"-ms-transition":"0ms","-ms-transform":n,"-webkit-transition":"0ms","-webkit-transform":n,transition:"0ms",transform:n})}else this._list.eq(i).css("left",s+"px");this._pos[i]=s}}},touchend:function(t){if("touchend"==t.type&&t.originalEvent.touches.length<=1||"dragend"==t.type){if(this._scroll)return this._drag=!1,this._scroll=!1,!1;this.animate(this.direction()),this._drag=!1,this._scroll=!1}},position:function(i){var s=this._view*this._item_w;if(-1==i||1==i){for(this._startX=0,this._start=[],e=0;e<this._len;++e)this._start[e]=this._pos[e];this._left=i*s}else this._left>s&&(this._left=s),this._left<-s&&(this._left=-s);if(this.opts.roll){for(var n=[],e=0;e<this._len;++e)n[e]=this._pos[e];n.sort(function(t,i){return t-i});var r=n[this._len-this._view],o=t.inArray(n[0],this._pos),h=t.inArray(r,this._pos);if(this._view<=1&&(r=this._len-1),this.opts.multi){if(1==i&&n[0]>=0||this._drag&&n[0]>=100)for(e=0;e<this._view;++e,++o,++h)this._start[h]=this._start[o]-s,this._list.eq(h).css("left",this._start[h]+"px");else if(-1==i&&n[0]<=0||this._drag&&n[0]<=-100)for(e=0;e<this._view;++e,++o,++h)this._start[o]=this._start[h]+s,this._list.eq(o).css("left",this._start[o]+"px")}else if(1==i&&n[0]>=0||this._drag&&n[0]>0)for(e=0;e<this._view;++e,++o,++h)this._start[h]=this._start[o]-s,this._list.eq(h).css("left",this._start[h]+"px");else if(-1==i&&n[r]<=0||this._drag&&n[r]<=0)for(e=0;e<this._view;++e,++o,++h)this._start[o]=this._start[h]+s,this._list.eq(o).css("left",this._start[o]+"px")}else this.limit_chk()&&(this._left=this._left/2)},animate:function(i,s){if(this._drag||!this._scroll||s){var n=this,e=this._speed;s&&this.position(i);var r=i*(this._item_w*this._view);(0==this._left||!this.opts.roll&&this.limit_chk())&&(r=0),this._list.each(function(i,o){if(n._pos[i]=n._start[i]+r,n.opts.supportsCssTransitions&&n.opts.transition){var h=e+"ms",a="translate3d("+n._pos[i]+"px,0,0)";s&&(h="0ms"),t(this).css({left:"","-moz-transition":h,"-moz-transform":a,"-ms-transition":h,"-ms-transform":a,"-webkit-transition":h,"-webkit-transform":a,transition:h,transform:a})}else t(this).stop(),t(this).animate({left:n._pos[i]+"px"},e)}),this.counter()}},direction:function(){var t=0;return this._left<-this._range?t=-1:this._left>this._range&&(t=1),this._drag&&!this._scroll||(t=0),t},limit_chk:function(){var t=parseInt((this._len-1)/this._view)*this._view;return 0==this._start[0]&&this._left>0||0==this._start[t]&&this._left<0},go_page:function(i,s){for(var n=t.inArray(0,this._pos)/this._view+1-(i+1);0!=n;)n<0?(this.animate(-1,!0),n++):n>0&&(this.animate(1,!0),n--)},counter:function(){if("function"==typeof this.opts.counter){var i={total:Math.ceil(this._len/this._view),current:t.inArray(0,this._pos)/this._view+1};this.opts.counter(i)}}}}(jQuery),$(document).ready(function(){$(".main_visual").hover(function(){$("#btn_prev,#btn_next").fadeIn()},function(){$("#btn_prev,#btn_next").fadeOut()}),$dragBln=!1,$(".main_image").touchSlider({flexible:!0,speed:1e3,btn_prev:$("#btn_prev"),btn_next:$("#btn_next"),paging:$(".flicking_con a"),counter:function(t){$(".flicking_con a").removeClass("on").eq(t.current-1).addClass("on")}}),$(".main_image").bind("mousedown",function(){$dragBln=!1}),$(".main_image").bind("dragstart",function(){$dragBln=!0}),$(".main_image a").click(function(){if($dragBln)return!1}),timer=setInterval(function(){$("#btn_next").click()},4e3),$(".main_visual").hover(function(){clearInterval(timer)},function(){timer=setInterval(function(){$("#btn_next").click()},4e3)}),$(".main_image").bind("touchstart",function(){clearInterval(timer)}).bind("touchend",function(){timer=setInterval(function(){$("#btn_next").click()},4e3)})});